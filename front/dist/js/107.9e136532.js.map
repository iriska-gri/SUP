{"version":3,"file":"js/107.9e136532.js","mappings":"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","sources":["webpack://front/./src/components/UI/FInputSearch.vue?1983","webpack://front/src/components/UI/FInputSearch.vue","webpack://front/./src/components/UI/FInputSearch.vue?eb7e","webpack://front/./src/components/UI/FInputSearch.vue","webpack://front/./src/views/Tasks.vue?4d6f","webpack://front/src/views/Tasks.vue","webpack://front/./src/views/Tasks.vue?140a","webpack://front/./src/views/Tasks.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-col',{staticClass:\"pb-3 pt-1 px-1\"},[_c('layout-label',{staticClass:\"text-nowrap \",attrs:{\"title\":_vm.title,\"disabled\":_vm.disabled}},[_c('v-text-field',{attrs:{\"background-color\":\"inputcolor\",\"single-line\":\"\",\"solo\":\"\",\"dense\":\"\",\"clearable\":\"\",\"clear-icon\":\"mdi-close\",\"hide-details\":\"true\",\"append-outer-icon\":_vm.appendouter,\"type\":_vm.type,\"disabled\":_vm.disabled},on:{\"input\":function($event){return _vm.$emit('filterreestr')}},model:{value:(_vm.filt),callback:function ($$v) {_vm.filt=$$v},expression:\"filt\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n <v-col class=\"pb-3 pt-1 px-1\">\r\n    <layout-label\r\n        :title=\"title\"\r\n        :disabled=\"disabled\"\r\n        class=\"text-nowrap \"\r\n    >\r\n        <v-text-field\r\n            @input=\"$emit('filterreestr')\"\r\n            background-color='inputcolor'\r\n            single-line\r\n            solo\r\n            dense\r\n            clearable\r\n            clear-icon=\"mdi-close\"\r\n            v-model=\"filt\"\r\n            hide-details=\"true\"\r\n            :append-outer-icon=\"appendouter\"\r\n            :type=\"type\"\r\n            :disabled=\"disabled\"\r\n        ></v-text-field>\r\n    </layout-label>\r\n </v-col>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"f-input-search\",\r\n    props: {\r\n        field: {\r\n            type: [String, Number],\r\n        },\r\n        type: {\r\n            type: String,\r\n            default: \"text\",\r\n        },\r\n        title: {\r\n            type: String,\r\n        },\r\n        appendouter:{\r\n            type: String,\r\n            default:\"\"\r\n        },\r\n        disabled: {\r\n            type: Boolean,\r\n            default: false,\r\n        },\r\n    },\r\n    computed: {\r\n        filt: {\r\n            get() {\r\n                return this.$store.getters[`filterslogic/input/${this.field}`];\r\n            },\r\n            set(value) {\r\n                this.$store.dispatch(\"filterslogic/input/addFilter\", { key: this.field, value });\r\n            },\r\n        },\r\n    },\r\n    beforeDestroy() {\r\n        this.$store.dispatch(\"filterslogic/input/addFilter\", { key: this.field, value: '' });\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep input::-webkit-outer-spin-button,\r\n::v-deep input::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FInputSearch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FInputSearch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FInputSearch.vue?vue&type=template&id=33e3ee79&scoped=true&\"\nimport script from \"./FInputSearch.vue?vue&type=script&lang=js&\"\nexport * from \"./FInputSearch.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FInputSearch.vue?vue&type=style&index=0&id=33e3ee79&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"33e3ee79\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VCol,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"flex-col h-100 w-100 projects\",attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"flex-grow-0\"},[_c('v-col',{staticClass:\"pa-0\"},[_c('filters-bar',{staticClass:\"pa-1 pb-3\",attrs:{\"header\":_vm.pagetitle},on:{\"sendData\":_vm.updateData,\"clear\":_vm.clear},scopedSlots:_vm._u([{key:\"filterslist\",fn:function(){return [_c('f-input-search',{attrs:{\"field\":'name',\"title\":\"Название\"}}),_c('f-daterange',{attrs:{\"field\":'datestart__gte',\"title\":\"Срок начала с:\"}}),_c('f-daterange',{attrs:{\"field\":'datestart__lte',\"title\":\"Срок начала до:\"}}),_c('f-daterange',{attrs:{\"field\":'dateend__gte',\"title\":\"Срок окончания c:\"}}),_c('f-daterange',{attrs:{\"field\":'dateend__lte',\"title\":\"Срок окончания до:\"}}),_c('f-multi-select',{attrs:{\"title\":'Статус задачи',\"field\":'task__status',\"disabled\":false}}),_c('f-input-search',{attrs:{\"field\":'responsible',\"title\":\"Ответственный\"}})]},proxy:true}])})],1)],1),_c('v-row',{staticClass:\"mt-0 \"},[_c('v-col',{staticClass:\"flex-col pa-1\"},[_c('v-card',{staticClass:\"flex-grow-1\"},[_c('v-data-table',{staticClass:\"grow-table\",attrs:{\"fixed-header\":true,\"disable-pagination\":true,\"hide-default-footer\":\"\",\"headers\":!_vm.into_project?_vm.headers:_vm.childHeaders,\"items\":!_vm.into_project?_vm.parentList:_vm.childList},on:{\"dblclick:row\":_vm.clickRow},scopedSlots:_vm._u([{key:\"item.link\",fn:function(ref){\nvar item = ref.item;\nreturn [(!_vm.into_project && item.all>0)?_c('v-icon',{on:{\"click\":function($event){$event.stopPropagation();return _vm.toChild(item)}}},[_vm._v(\"mdi-chevron-right\")]):(_vm.into_project)?_c('v-icon',{on:{\"click\":function($event){$event.stopPropagation();return _vm.backParent.apply(null, arguments)}}},[_vm._v(\"mdi-chevron-left\")]):_vm._e()]}},(!_vm.into_project)?{key:\"item.id\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(item.parent.id)+\"-\"+_vm._s(item.id)+\" \")]}}:{key:\"item.id\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(_vm.projectid)+\"-\"+_vm._s(_vm.taskid)+\"-\"+_vm._s(item.id)+\" \")]}},{key:\"item.dateend\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(_vm.timediff(item.dateend))+\" \")]}},{key:\"item.lastchanged\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(_vm.formatDate(item.lastchanged))+\" \")]}},{key:\"item.bars\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"d-flex align-center\"},[('completed' in item && item.all>0)?[_c('v-progress-linear',{staticStyle:{\"width\":\"80%\"},attrs:{\"value\":item.completed/item.all*100,\"height\":\"10\",\"buffer-value\":\"100\"}}),_c('div',{staticClass:\"ps-2\"},[_vm._v(_vm._s(((item.completed) + \"/\" + (item.all))))])]:_c('div',{staticClass:\"mx-auto\"},[(item.status__id==5)?_c('v-icon',{staticStyle:{\"color\":\"green\"}},[_vm._v(\"fa-solid fa-square-check\")]):_vm._e()],1),(_vm.superuser)?_c('v-menu',{attrs:{\"offset-x\":\"\",\"left\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('div',_vm._g(_vm._b({staticClass:\"ms-2 dots-vertical\"},'div',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-dots-vertical\")])],1)]}}],null,true)},[_c('v-list',[_c('v-list-item',[_c('v-list-item-title',[_vm._v(\"Удалить\")])],1)],1)],1):_c('div',{staticStyle:{\"width\":\"32px\"}}),_c('div',{staticClass:\"ps-2 dots-vertical\",on:{\"click\":function($event){$event.stopPropagation();return _vm.menu.apply(null, arguments)}}})],2)]}}],null,true)})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<v-container class=\"flex-col h-100 w-100 projects\" fluid>\r\n    <v-row class=\"flex-grow-0\">\r\n        <v-col class=\"pa-0\">\r\n                       <!--    -->\r\n                <filters-bar \r\n                @sendData=\"updateData\"\r\n                @clear=\"clear\"\r\n                class=\"pa-1 pb-3\"\r\n                  \r\n                    :header=\"pagetitle\"\r\n                >\r\n                  <template v-slot:filterslist>\r\n                      <f-input-search\r\n                        \r\n                        :field=\"'name'\"\r\n                        title=\"Название\"\r\n                    ></f-input-search>\r\n                      <f-daterange\r\n                    \r\n                        :field=\"'datestart__gte'\"\r\n                        title=\"Срок начала с:\"\r\n                        \r\n                    ></f-daterange>\r\n                        <f-daterange\r\n                       \r\n                        :field=\"'datestart__lte'\"\r\n                        title=\"Срок начала до:\"\r\n                        \r\n                    ></f-daterange>\r\n                    <f-daterange\r\n                  \r\n                        :field=\"'dateend__gte'\"\r\n                        title=\"Срок окончания c:\"\r\n                        \r\n                    ></f-daterange>\r\n                        <f-daterange\r\n                     \r\n                        :field=\"'dateend__lte'\"\r\n                        title=\"Срок окончания до:\"\r\n                        \r\n                    ></f-daterange>\r\n                      \r\n                  \r\n                     <f-multi-select\r\n                        \r\n                            :title=\"'Статус задачи'\"\r\n                            :field=\"'task__status'\"\r\n                            :disabled=\"false\"\r\n                        ></f-multi-select>\r\n                    <f-input-search\r\n                        \r\n                        :field=\"'responsible'\"\r\n                        title=\"Ответственный\"\r\n                    ></f-input-search>\r\n\r\n\r\n\r\n                       \r\n                        \r\n                  </template>\r\n                </filters-bar>\r\n                       \r\n        </v-col>\r\n\r\n    </v-row>\r\n    <v-row class=\"mt-0 \">\r\n        <v-col class=\"flex-col pa-1\">\r\n              <v-card class=\"flex-grow-1\">\r\n           \r\n        \r\n\r\n    <v-data-table\r\n        :fixed-header=\"true\"\r\n        @dblclick:row=\"clickRow\"\r\n        :disable-pagination=\"true\"\r\n        hide-default-footer\r\n        :headers=\"!into_project?headers:childHeaders\"\r\n        :items=\"!into_project?parentList:childList\"\r\n        class=\"grow-table\"\r\n    >\r\n     <template v-slot:[`item.link`]=\"{ item }\">\r\n\r\n        \r\n                <v-icon v-if=\"!into_project && item.all>0\" @click.stop=\"toChild(item)\">mdi-chevron-right</v-icon>\r\n                <v-icon v-else-if=\"into_project\" @click.stop=\"backParent\">mdi-chevron-left</v-icon>\r\n            </template>\r\n\r\n             <!-- <template v-slot:[`item.user_project`]=\"{ item }\">\r\n                {{find_rp(item.user_project)}}\r\n            </template> -->\r\n            \r\n\r\n             <template v-if=\"!into_project\" v-slot:[`item.id`]=\"{ item }\">\r\n                {{item.parent.id}}-{{item.id}}\r\n            </template>\r\n            <template v-else v-slot:[`item.id`]=\"{ item }\">\r\n                {{projectid}}-{{taskid}}-{{item.id}}\r\n            </template>\r\n          \r\n            <template v-slot:[`item.dateend`]=\"{ item }\">\r\n                {{timediff(item.dateend) }}\r\n            </template>\r\n            <template v-slot:[`item.lastchanged`]=\"{ item }\">\r\n                {{formatDate(item.lastchanged) }}\r\n            </template>\r\n            <template v-slot:[`item.bars`]=\"{ item }\">\r\n                <div class=\"d-flex align-center\">\r\n                  <template v-if=\"'completed' in item && item.all>0\">\r\n                    <v-progress-linear  style=\"width: 80%;\" :value=\"item.completed/item.all*100\" height=\"10\" buffer-value=\"100\"></v-progress-linear>\r\n                    <div class=\"ps-2\">{{`${item.completed}/${item.all}`}}</div>\r\n                  </template>    \r\n                <div class=\"mx-auto\" v-else><v-icon v-if=\"item.status__id==5\" style=\"color:green\">fa-solid fa-square-check</v-icon></div>\r\n\r\n\r\n\r\n\r\n\r\n                    <v-menu offset-x left v-if=\"superuser\">\r\n                        <template v-slot:activator=\"{ on, attrs }\">\r\n                           \r\n                            <div v-bind=\"attrs\"\r\n                                v-on=\"on\" \r\n                                class=\"ms-2 dots-vertical\">\r\n                                <v-icon>mdi-dots-vertical</v-icon>\r\n                            </div>\r\n                        </template>\r\n                        <v-list>\r\n                            <v-list-item><v-list-item-title>Удалить</v-list-item-title></v-list-item>\r\n                        </v-list>\r\n                    </v-menu>\r\n                    <div v-else style=\"width: 32px;\">\r\n\r\n                    </div>\r\n                    <div @click.stop=\"menu\" class=\"ps-2 dots-vertical\"></div>\r\n                </div>\r\n            </template>\r\n    \r\n    \r\n    \r\n    \r\n    </v-data-table>\r\n       \r\n\r\n        </v-card>\r\n\r\n        </v-col>\r\n\r\n    </v-row>\r\n</v-container>\r\n\r\n</template>\r\n<script>\r\n\r\nimport moment from \"moment\"\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nimport FiltersBar from '../components/UI/FiltersBar.vue';\r\nimport FInputSearch from '../components/UI/FInputSearch.vue';\r\nimport {axiosInstance} from '@/utils/api'\r\nconst { mapMutations, mapActions } = createNamespacedHelpers(\"filterslogic\");\r\nconst globalstore = createNamespacedHelpers(\"globalstore\");\r\nexport default {\r\n  components: { FiltersBar, FInputSearch },\r\n    data: () => ({\r\n        model:'',\r\n        search: '',       \r\n        ws: null,\r\n        projectid:null,\r\n        taskid:null,\r\n        superuser: false,  \r\n        childHeaders:[\r\n            {text: \" \", value: \"link\"},\r\n            {text:\"Код\",value:\"id\"},\r\n\r\n            {text:\"Название\", value: \"name\"},\r\n            {text:\"Ответственный\", value:\"responsible.sn\"},\r\n            {text:\"Срок\", value: \"dateend\"},\r\n            {text:\"Статус\", value: \"status.name\"},\r\n\r\n        ],      \r\n        headers: [\r\n            {text: \" \", value: \"link\"},\r\n            {text:\"Код\",value:\"id\"},\r\n\r\n            {text:\"Название\", value: \"name\"},\r\n            {text:\"Ответственный\", value:\"responsible.sn\"},\r\n            {text:\"Срок\", value: \"dateend\"},\r\n            {text:\"Статус\", value: \"status.name\"},\r\n            {text:\"Изменено\", value: \"lastchanged\"},\r\n            {text:\"Выполнение\", value: \"bars\"},\r\n        ],\r\n        into_project: false,\r\n        pagetitle:'',      \r\n        menu: false,\r\n        childList:[],\r\n\r\n        parentList:[],       \r\n       \r\n    }),\r\n\r\n    methods: {   \r\n        ...globalstore.mapMutations(['set_assign_id']),\r\n        ...mapMutations([\"setFields\"]),\r\n        ...mapActions([\"clear\", \"getFilters\", \"addFilter\", \"activefilters\"]),\r\n        ...globalstore.mapGetters([\"getassign_id\"]),\r\n        // async createproj(){\r\n            \r\n        //     let res = await axiosInstance.post('/createproj')\r\n        //     console.log(res);\r\n        //     this.$router.push(`/project/${res.data.id}`)\r\n        // },\r\n   \r\n\r\n        timediff(dateend) {\r\n            return moment(dateend).isValid()? moment(dateend).locale('ru').fromNow(): 'Не установлен'\r\n        },\r\n        formatDate(date) {\r\n            return (date && moment(date).isValid())? moment(date).format(\"DD.MM.YYYY\"): '' \r\n        },\r\n\r\n        \r\n        \r\n        build(data) {\r\n            \r\n            if (!this.into_project){\r\n            if (data.payload.length>0){    \r\n            data.payload.forEach(el => {\r\n\r\n                el[\"completed\"]= el.task_work.filter(el=>el.status.id==5).length\r\n                el[\"all\"]=el.task_work.length\r\n                \r\n            });    \r\n            this.parentList= data.payload\r\n            }\r\n            else{\r\n                this.parentList=[]\r\n            }\r\n            \r\n            }\r\n            else{\r\n                this.childList = data.child\r\n            }\r\n           \r\n            \r\n        },\r\n        async updateData(){\r\n            let payload=await this.activefilters()\r\n            for (let key of Object.keys(payload))\r\n         {\r\n             if ( ['task__status__in'].includes(key))  {\r\n             let arr=[]             \r\n             payload[key].forEach(el => {arr.push(el.id)\r\n                \r\n             });\r\n             payload['status__in']=arr\r\n             delete payload[key]\r\n             }\r\n\r\n         }\r\n          this.into_project=false\r\n            this.ws.send({\"action\": \"getfilter\", payload})\r\n        //    console.log(await this.activefilters());\r\n        },\r\n      \r\n        find_rp(arr){            \r\n            const rp = arr.find(el=>el.role.id==2)\r\n            return rp==undefined?\"Не назначен\": rp.user.sn\r\n        },\r\n\r\n\r\n\r\n        update(){\r\n            console.log(`UPDATE`)\r\n\r\n                },\r\n        titler(itname=\"\"){            \r\n            if(this.$route.path==\"/projects\")             {\r\n             this.pagetitle= !this.into_project?\"Проекты\":`${itname}: Задачи`\r\n            }else if(this.$route.path==\"/tasks\"){\r\n             this.pagetitle= !this.into_project?\"Задачи\":`${itname}: Работы`\r\n            }\r\n            else if(this.$route.path==\"/works\"){\r\n             this.pagetitle= !this.into_project?\"Работы\":`${itname}: Поручения`\r\n            \r\n            }else{\r\n\r\n                this.pagetitle=\"Поручения\"\r\n            }\r\n        },\r\n      \r\n        toChild(item) {\r\n            this.projectid= item.parent.id\r\n            this.taskid = item.id\r\n            this.into_project = true;\r\n            \r\n            this.titler(item.name)    \r\n            this.childList=item.task_work\r\n            // this.ws.conn.send(JSON.stringify({\"action\": \"getchild\",\"parent__type\":this.$route.path.slice(1), \"parent__id\": item.id}))\r\n        },\r\n\r\n        backParent() {\r\n            this.into_project = false;\r\n            this.titler()\r\n         \r\n        },\r\n        clickRow(e, row)  {\r\n            let path = this.$route.path\r\n            let pusher={\r\n                '/projects':[{name:\"Task\",'col':'id'},{name:\"Project\",'col':'id'} ],\r\n                '/tasks':[{name:\"Work\",'col':'id'},{name:\"Task\",'col':'id'}],\r\n                 '/works':[{name:\"Work\",'col':'parent'},{name:\"Work\",'col':'id'}],\r\n                '/assignments':[{name:\"Work\",'col':'parent'},{name:\"Work\",'col':'parent'}]\r\n            }           \r\n            \r\n            let ind = this.into_project? 0:1       \r\n            // console.log(\"ssss\",{ name: pusher[path][ind].name, params: { tid:row.item[pusher[path][ind].col]}}); \r\n            console.log(\"новый роут-----\",row.item )\r\n            let params = { id:row.item[pusher[path][ind].col]}\r\n          \r\n             if(ind==0){\r\n                this.$router.push({path:`/project/${this.projectid}/task/${this.taskid}/work/${row.item.id}`})\r\n            }\r\n\r\n           \r\n            else{\r\n                   this.$router.push({path:`/project/${row.item.parent.id}/task/${row.item.id}`})\r\n            }\r\n               \r\n            // this.$router.push({ name: pusher[path][ind].name, params: params})\r\n            \r\n        },\r\n        wsconnect(){\r\n            this.ws = new this.$pws()               \r\n            this.ws.start(`/reestr${this.$route.path}`);\r\n            this.ws.addEvent('onmessage', (event) => {\r\n            const data = JSON.parse(event.data); \r\n            console.log(data, \"dataonmess\");\r\n            try{                  \r\n            this[data.action](data);\r\n            }catch(e){\r\n                console.log(e)\r\n            }\r\n        }\r\n        )\r\n        }\r\n    },\r\n     watch:{\r\n    $route(to, from){\r\n    this.ws.stop()\r\n    this.into_project=false\r\n    this.childList=[]\r\n    this.parentList=[]\r\n    this.titler()\r\n    this.wsconnect()\r\n    \r\n  }\r\n},\r\n\r\n  \r\n  \r\n    mounted() {\r\n        this.superuser = this.$store.getters['auth/getSuperUser']\r\n        this.setFields({ \r\n           task__status: { module: \"mult\" },\r\n        //    role:{module:\"mult\"}\r\n          \r\n        });\r\n\r\n        this.getFilters([\r\n            // {role:{name:\"role\",sort:\"id\"}},\r\n            {task__status:{name:\"task__status\", sort:\"id\", related_name: \"name\"}}], true).then(async (data) => {console.log(data,\"data\")})\r\n        \r\n        this.wsconnect()\r\n        this.titler()\r\n        \r\n    },\r\n    destroyed() {\r\n        this.ws.stop()\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    @import \"@/utils/colors.scss\";\r\n    \r\n    .main-projects {\r\n        color: $color-main;\r\n    }\r\n\r\n    \r\n\r\n</style>\r\n<style lang=\"scss\">\r\n    @import \"@/utils/colors.scss\";\r\n    \r\n        h4 {\r\n            color: $bg-purple;\r\n  \r\n        }\r\n    \r\n    .task-table tbody tr:first-child td {\r\n\r\n        color: $color-main;\r\n    }\r\n\r\n    tbody {\r\n        cursor: pointer;\r\n    }\r\n\r\n    .main-projects .theme--light.v-data-table > .v-data-table__wrapper > table > thead > tr > th {\r\n        font-weight: 600;\r\n    \r\n        color: $color-main;\r\n    }\r\n\r\n    .main-projects .theme--light.v-data-table > .v-data-table__wrapper > table tr .dots-vertical i {\r\n        opacity: 0;\r\n    }\r\n\r\n    .main-projects .theme--light.v-data-table > .v-data-table__wrapper > table tr:hover .dots-vertical i {\r\n        opacity: 1;\r\n    }\r\n\r\n    .grow-table {\r\n        display: flex;\r\n        flex-direction: column;\r\n        overflow-y: auto;\r\n            }\r\n\r\n    .iconInline {\r\n        position: absolute;\r\n        z-index: 3;\r\n        left: 1%;\r\n        top: 93%\r\n        \r\n        \r\n    }\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Tasks.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Tasks.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tasks.vue?vue&type=template&id=4788330e&scoped=true&\"\nimport script from \"./Tasks.vue?vue&type=script&lang=js&\"\nexport * from \"./Tasks.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tasks.vue?vue&type=style&index=0&id=4788330e&prod&lang=scss&scoped=true&\"\nimport style1 from \"./Tasks.vue?vue&type=style&index=1&id=4788330e&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4788330e\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCard,VCol,VContainer,VDataTable,VIcon,VList,VListItem,VListItemTitle,VMenu,VProgressLinear,VRow})\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","disabled","appendouter","type","on","$event","$emit","model","value","callback","$$v","filt","expression","staticRenderFns","component","VCol","pagetitle","updateData","clear","scopedSlots","_u","key","fn","proxy","into_project","childHeaders","headers","childList","parentList","clickRow","ref","item","all","stopPropagation","toChild","_v","backParent","apply","arguments","_e","_s","projectid","taskid","id","parent","timediff","dateend","formatDate","lastchanged","staticStyle","completed","status__id","_g","_b","menu","globalstore","VCard"],"sourceRoot":""}