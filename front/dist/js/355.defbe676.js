"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[355],{13687:function(t,e,s){s(19027);var i=s(75352);e["Z"]=(0,i.Ji)("spacer","div","v-spacer")},62165:function(t,e,s){s.d(e,{Z:function(){return d}});var i=s(38223),n=s(13037),o=s(4802),r=s(75352),a=s(67678);const l=(0,a.Z)(i.Z,(0,n.d)("windowGroup","v-window-item","v-window"));var c=l.extend().extend().extend({name:"v-window-item",directives:{Touch:o.Z},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data(){return{isActive:!1,inTransition:!1}},computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return this.$slots.default},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=(0,r.kb)(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(t){this.inTransition&&this.$nextTick((()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=(0,r.kb)(t.clientHeight))}))}},render(t){return t("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent((()=>[this.genWindowItem()])))}}),d=c.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const t=c.options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}})},45085:function(t,e,s){s.d(e,{Z:function(){return l}});var i=s(4802),n=s(76656),o=s(42240),r=s(13385),a=r.y.extend({name:"v-window",directives:{Touch:i.Z},provide(){return{windowGroup:this}},props:{activeClass:{type:String,default:"v-window-item--active"},continuous:Boolean,mandatory:{type:Boolean,default:!0},nextIcon:{type:[Boolean,String],default:"$next"},prevIcon:{type:[Boolean,String],default:"$prev"},reverse:Boolean,showArrows:Boolean,showArrowsOnHover:Boolean,touch:Object,touchless:Boolean,value:{required:!1},vertical:Boolean},data(){return{changedByDelimiters:!1,internalHeight:void 0,transitionHeight:void 0,transitionCount:0,isBooted:!1,isReverse:!1}},computed:{isActive(){return this.transitionCount>0},classes(){return{...r.y.options.computed.classes.call(this),"v-window--show-arrows-on-hover":this.showArrowsOnHover}},computedTransition(){if(!this.isBooted)return"";const t=this.vertical?"y":"x",e=this.internalReverse?!this.isReverse:this.isReverse,s=e?"-reverse":"";return`v-window-${t}${s}-transition`},hasActiveItems(){return Boolean(this.items.find((t=>!t.disabled)))},hasNext(){return this.continuous||this.internalIndex<this.items.length-1},hasPrev(){return this.continuous||this.internalIndex>0},internalIndex(){return this.items.findIndex(((t,e)=>this.internalValue===this.getValue(t,e)))},internalReverse(){return this.$vuetify.rtl?!this.reverse:this.reverse}},watch:{internalIndex(t,e){this.isReverse=this.updateReverse(t,e)}},mounted(){window.requestAnimationFrame((()=>this.isBooted=!0))},methods:{genDefaultSlot(){return this.$slots.default},genContainer(){const t=[this.genDefaultSlot()];return this.showArrows&&t.push(this.genControlIcons()),this.$createElement("div",{staticClass:"v-window__container",class:{"v-window__container--is-active":this.isActive},style:{height:this.internalHeight||this.transitionHeight}},t)},genIcon(t,e,s){var i,r,a;const l={click:t=>{t.stopPropagation(),this.changedByDelimiters=!0,s()}},c={"aria-label":this.$vuetify.lang.t(`$vuetify.carousel.${t}`)},d=null!==(a=null===(r=(i=this.$scopedSlots)[t])||void 0===r?void 0:r.call(i,{on:l,attrs:c}))&&void 0!==a?a:[this.$createElement(n.Z,{props:{icon:!0},attrs:c,on:l},[this.$createElement(o.Z,{props:{large:!0}},e)])];return this.$createElement("div",{staticClass:`v-window__${t}`},d)},genControlIcons(){const t=[],e=this.$vuetify.rtl?this.nextIcon:this.prevIcon;if(this.hasPrev&&e&&"string"===typeof e){const s=this.genIcon("prev",e,this.prev);s&&t.push(s)}const s=this.$vuetify.rtl?this.prevIcon:this.nextIcon;if(this.hasNext&&s&&"string"===typeof s){const e=this.genIcon("next",s,this.next);e&&t.push(e)}return t},getNextIndex(t){const e=(t+1)%this.items.length,s=this.items[e];return s.disabled?this.getNextIndex(e):e},getPrevIndex(t){const e=(t+this.items.length-1)%this.items.length,s=this.items[e];return s.disabled?this.getPrevIndex(e):e},next(){if(!this.hasActiveItems||!this.hasNext)return;const t=this.getNextIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},prev(){if(!this.hasActiveItems||!this.hasPrev)return;const t=this.getPrevIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},updateReverse(t,e){const s=this.items.length,i=s-1;return s<=2?t<e:t===i&&0===e||(0!==t||e!==i)&&t<e}},render(t){const e={staticClass:"v-window",class:this.classes,directives:[]};if(!this.touchless){const t=this.touch||{left:()=>{this.$vuetify.rtl?this.prev():this.next()},right:()=>{this.$vuetify.rtl?this.next():this.prev()},end:t=>{t.stopPropagation()},start:t=>{t.stopPropagation()}};e.directives.push({name:"touch",value:t})}return t("div",e,[this.genContainer()])}}),l=a.extend({name:"v-tabs-items",props:{mandatory:{type:Boolean,default:!1}},computed:{classes(){return{...a.options.computed.classes.call(this),"v-tabs-items":!0}},isDark(){return this.rootIsDark}},methods:{getValue(t,e){return t.id||r.y.options.methods.getValue.call(this,t,e)}}})},97953:function(t,e,s){s.d(e,{qW:function(){return o}});var i=s(96313),n=s(75352);const o=(0,n.Ji)("v-toolbar__title"),r=(0,n.Ji)("v-toolbar__items");i.Z},54355:function(t,e,s){s.r(e),s.d(e,{default:function(){return H}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-row",{staticClass:"ma-1"},[s("div",{staticClass:"alerts"},[""==!t.message.mes?s("v-alert",{attrs:{type:"success",dismissible:""}},[t._v(" "+t._s(t.message.mes)+" ")]):t._e()],1),s("v-col",{staticClass:"d-flex flex-col  gaps"},[s("v-row",{staticClass:"gaps"},[s("v-col",{staticClass:"flex-grow-0 d-flex flex-col colblock pa-0",attrs:{xl:"2",lg:"2",cols:"12"}},[s("Cards",{attrs:{ma:"ma-1 mt-2",color:"inyand",elevation:4},scopedSlots:t._u([{key:"cards",fn:function(){return[s("v-app-bar",{staticClass:"flex-grow-0 d-flex d-flex flex-col ma-0 px-2 mx-2 mb-4",attrs:{dense:"",elevation:"1",color:"inyand"}},[s("v-toolbar-title",{attrs:{color:"inyand"}},[t._v(" "+t._s("project"==t.cards?"Задачи":"task"==t.cards?"Работы":"Поручения"))]),s("v-spacer"),s("MyIco",{attrs:{icons:"mdi-plus",color:"btns",cursor:!1,tooltip:!0,text_tool:"Добавить"},on:{click:function(e){return t.$emit("project"==t.cards?"createnewTask":"task"==t.cards?"createnewWork":"createnewass")}}})],1),t._t("spisok")]},proxy:!0}],null,!0)})],1),s("v-tabs-items",{staticClass:"tebs",model:{value:t.tabProj,callback:function(e){t.tabProj=e},expression:"tabProj"}},[s("v-tab-item",{attrs:{value:"1"}},[s("transition",{attrs:{name:"bounce"},on:{"after-enter":function(e){return t.$emit("afterEnter")},"after-leave":function(e){return t.$emit("afterLeave")}}},[s("v-row",{staticClass:"ma-0"},[s("v-col",{staticClass:"flex-col d-flex pa-0 informations colblock",attrs:{xl:t.chatview?8:12,lg:t.chatview?8:12,md:"12",sm:"12",cols:"12"}},[s("v-row",{staticClass:"ma-0",class:"mb-1"},[s("v-col",{staticClass:"flex-col d-flex pa-0"},[s("Cards",{attrs:{ma:"ma-2"},scopedSlots:t._u([{key:"cards",fn:function(){return[s("Cards",{attrs:{color:"inyand",elevation:0,ma:"ma-0"},scopedSlots:t._u([{key:"cards",fn:function(){return[t._t("informations"),s("v-divider")]},proxy:!0}],null,!0)})]},proxy:!0}])})],1)],1),s("v-row",{staticClass:"ma-0 flex-grow-0 row_informations "},[s("v-col",{staticClass:"flex-col  d-flex pa-0 colfiles",attrs:{xl:t.chatview?12:8,lg:t.chatview?12:8,md:"12",sm:"12",cols:"12"}},[s("Cards",{attrs:{ma:"ma-2"},scopedSlots:t._u([{key:"cards",fn:function(){return[s("Cards",{attrs:{color:"inyand",elevation:0},scopedSlots:t._u([{key:"cards",fn:function(){return[t._t("filess")]},proxy:!0}],null,!0)})]},proxy:!0}])})],1),t.chatview?t._e():s("v-col",{staticClass:"flex-col d-flex pa-0 ml-1"},[s("Cards",{attrs:{ma:"ma-2"},scopedSlots:t._u([{key:"cards",fn:function(){return[s("Cards",{staticClass:"overflow-auto overflow-x-hidden h-0",attrs:{color:"inyand",elevation:0},scopedSlots:t._u([{key:"cards",fn:function(){return[t._t("graphic")]},proxy:!0}],null,!0)})]},proxy:!0}],null,!1,101885628)})],1)],1)],1),s("v-col",{directives:[{name:"show",rawName:"v-show",value:t.chatview,expression:"chatview"}],staticClass:"pa-0",class:t.chatview?"flex-col d-flex":""},[s("v-row",{staticClass:"ma-0 ml-1 flex-grow-0 row_chat colblock",style:{height:t.height+"vh"}},[s("v-col",{staticClass:"flex-col d-flex pa-0"},[s("Cards",{directives:[{name:"show",rawName:"v-show",value:t.chatview,expression:"chatview"}],attrs:{ma:"ma-2"},scopedSlots:t._u([{key:"cards",fn:function(){return[s("Cards",{attrs:{color:"inyand",elevation:0},scopedSlots:t._u([{key:"cards",fn:function(){return[t._t("chat"),s("v-row",{staticClass:"flex-grow-0 mt-1 align-self-center"},t._l(t.btnchat,(function(e,i){return s("v-col",{key:i,staticClass:"flex-grow-0 pa-1 pt-0"},[s("v-btn",{attrs:{"x-small":"",color:"secondary",outlined:""},on:{click:function(s){return t.startResize(e)}}},[s("v-icon",[t._v(" "+t._s(e)+" ")])],1)],1)})),1)]},proxy:!0}],null,!0)})]},proxy:!0}])})],1)],1),s("v-row",{staticClass:"ml-1 mt-1 mb-0 mr-0"},[s("v-col",{staticClass:"flex-col d-flex pa-0"},[s("Cards",{attrs:{ma:"ma-2"},scopedSlots:t._u([{key:"cards",fn:function(){return[s("Cards",{attrs:{color:"inyand",elevation:0},scopedSlots:t._u([{key:"cards",fn:function(){return[t._t("graphic")]},proxy:!0}],null,!0)})]},proxy:!0}])})],1)],1)],1)],1)],1)],1),s("v-tab-item",{attrs:{value:"2"}},[s("transition",{attrs:{name:"bounce"},on:{"after-enter":function(e){return t.$emit("afterEnter")},"after-leave":function(e){return t.$emit("afterLeave")}}},[t._t("projdocs")],2)],1),s("v-tab-item",{attrs:{value:"3"}},[s("history")],1)],1)],1)],1)],1)},n=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-row",{staticClass:"rounded-sm"},[s("v-col",{staticClass:"flex-col d-flex main_theme  ma-2"},[s("v-row",{staticClass:"h-0  overflow-auto"},[s("v-col",[s("v-card",[s("v-card-text",t._l(t.historydetailer,(function(e){return s("v-row",{key:e.id},[s("v-col",{attrs:{cols:"2"}},[t._v(" "+t._s(t.momentdatetime(e.new.createdate))+" ")]),0==t.indx?s("v-col",[t._v(" "+t._s(t.factordict[e.new.formfactor])+":"),s("br"),s("strong",[t._v(t._s(e.new[e.new.formfactor].name))])]):t._e(),s("v-col",[s("span",{staticClass:"pointer",on:{click:function(s){return t.showuserinfo(e.new.author.id)}}},[t._v(t._s(e.new.author.sn))])]),s("v-col",[t._v(" "+t._s(e.new.action.name)+" ")]),s("v-col",t._l(Object.entries(e.new.info),(function(i){var n=i[0],o=i[1];return s("div",{key:n},[["status"].includes(n)&&void 0!=e.old&&o.id!=e.old.info[n].id?s("div",[t._v(t._s(t.dictoffields[n])+":"+t._s(e.old.info[n].name)+" "),s("v-icon",{attrs:{color:"btns","x-small":""}},[t._v("mdi-arrow-right")]),t._v(t._s(o.name))],1):["status"].includes(n)&&void 0==e.old?s("div",[t._v(t._s(t.dictoffields[n])+": "),s("v-icon",{attrs:{color:"btns","x-small":""}},[t._v("mdi-plus")]),t._v(" "+t._s(null==o?"НЕ СУЩЕСТВУЕТ":o.name))],1):["responsible"].includes(n)&&void 0!=e.old&&o.id!=e.old.info[n].id?s("div",[t._v(t._s(t.dictoffields[n])+":"),s("span",{staticClass:"pointer",on:{click:function(s){return t.showuserinfo(e.old.info[n].id)}}},[t._v(t._s(e.old.info[n].sn)+" ")]),s("v-icon",{attrs:{color:"btns","x-small":""}},[t._v("mdi-arrow-right")]),s("span",{staticClass:"pointer",on:{click:function(e){return t.showuserinfo(o.id)}}},[t._v(t._s(o.sn)+" ")])],1):["responsible"].includes(n)&&void 0==e.old?s("div",[t._v(t._s(t.dictoffields[n])+":"),s("v-icon",{attrs:{color:"btns","x-small":""}},[t._v("mdi-plus")]),s("span",{staticClass:"pointer",on:{click:function(e){return t.showuserinfo(o.id)}}},[t._v(t._s(o.sn))])],1):["datestart","dateend"].includes(n)&&void 0!=e.old&&o!=e.old.info[n]?s("div",[t._v(t._s(t.dictoffields[n])+":"+t._s(t.momentedDay(e.old.info[n]))+" "),s("v-icon",{attrs:{color:"btns","x-small":""}},[t._v("mdi-arrow-right")]),t._v(" "+t._s(t.momentedDay(o))+" ")],1):["datestart","dateend"].includes(n)&&void 0==e.old?s("div",[t._v(t._s(t.dictoffields[n])+": "),s("v-icon",{attrs:{color:"btns","x-small":""}},[t._v("mdi-plus")]),t._v(" "+t._s(t.momentedDay(o))+" ")],1):"string"==typeof o&&void 0!=e.old&&o!=e.old.info[n]?s("div",[t._v(t._s(t.dictoffields[n])+": "+t._s(e.old.info[n])+" "),s("v-icon",{attrs:{color:"btns","x-small":""}},[t._v("mdi-arrow-right")]),t._v(t._s(o))],1):"string"==typeof o&&void 0==e.old?s("div",[t._v(t._s(t.dictoffields[n])+": "),s("v-icon",{attrs:{color:"btns","x-small":""}},[t._v("mdi-plus")]),t._v(t._s(o))],1):t._e()])})),0),s("v-col",[t._v(" "+t._s(e.new.comment)+" ")])],1)})),1)],1)],1)],1)],1)],1)},r=[],a=s(18241),l=s(20629),c=s(30381),d=s.n(c);s(45296);const u=(0,l._p)("projectstate");var h={mixins:[a.Z],props:{level:{type:Number,default:1},indx:{type:Number,default:0}},methods:{formatDate(t){if(t)return d()(t).locale("Ru").format("HH:mm DD MMMM YYYY")},momentdatetime(t){return d()(t).format("HH:mm DD.MM.YYYY")}},data:()=>({historydetail:!1,factordict:{project:"Проект",task:"Задача",work:"Работа",assignment:"Поручение"},level_helper:[{},{text:"Проект",store:"getProject"},{text:"Задача",store:"gettasks"},{text:"Работа",store:"getworks"},{text:"Поручение",store:"getworks"}],dictoffields:{name:"Название",responsible:"Ответственный",datestart:"Начало",dateend:"Окончание",description:"Описание",status:"Статус",filepath:"Загружен",filedel:"Удален",iditit:"Результат"}}),computed:{...u.mapGetters(["getProject","getProjectwatchers","getProjectusers"]),historydetailer(){let t=[],e=["task","work","assignment"];return this.getProject.history.forEach(((t,s)=>{let i="project",n=1;for(let o in e){if(Object.is(t[e],null))break;Object.is(t[e[o]],null)||!("name"in t[e[o]])||Object.is(t[e[o]].name,null)||(i=e[o],n=Number(o)+2)}t.formfactor=i,t.level=n})),this.getProject.history.forEach(((e,s)=>{let i={new:e,old:this.getProject.history.slice(s+1).find((t=>e.level==t.level&&t.formfactor&&t[t.formfactor].id==e[e.formfactor].id))};t.push(i)})),console.log(t,"PHPHPHPH"),t}},async mounted(){}},v=h,f=s(43736),m=s(43453),p=s.n(m),w=s(34145),g=s(54886),_=s(60266),x=s(4324),y=s(11713),C=(0,f.Z)(v,o,r,!1,null,null,null),b=C.exports;p()(C,{VCard:w.Z,VCardText:g.ZB,VCol:_.Z,VIcon:x.Z,VRow:y.Z});var k={name:"work-task-ass-projec",components:{history:b},data(){return{height:55.8,btnchat:["mdi-menu-up","mdi-menu-down"]}},props:{breadcrumbs:{type:Array,requiered:!0},chatview:{type:Boolean,default:!1},tabProj:{type:String,default:"1"},title:{type:String,default:""},cards:{type:String,default:""},message:{type:Object,default:()=>({mes:"",show:!1})}},computed:{},methods:{startResize(t){let e=15;console.log("this.height",this.height),"mdi-menu-up"==t&&this.height>19&&(this.height-=e),"mdi-menu-down"==t&&this.height<71&&(console.log("mdi-menu-down"),this.height+=e)}}},I=k,T=s(37359),$=s(15100),Z=s(16190),P=s(99223),B=s(13687),S=s(62165),j=s(45085),V=s(97953),A=(0,f.Z)(I,i,n,!1,null,null,null),H=A.exports;p()(A,{VAlert:T.Z,VAppBar:$.Z,VBtn:Z.Z,VCol:_.Z,VDivider:P.Z,VIcon:x.Z,VRow:y.Z,VSpacer:B.Z,VTabItem:S.Z,VTabsItems:j.Z,VToolbarTitle:V.qW})}}]);
//# sourceMappingURL=355.defbe676.js.map